!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.T=e()}(this,function(){/*!
 * TerrificJS modularizes your frontend code by solely relying on naming conventions.
 * http://terrifically.org
 *
 * @copyright   Copyright (c) 2016 Remo Brunschwiler
 * @license     Licensed under MIT license
 * @version     3.0.0
 */
function t(t,i){if(t||i)if(r.isNode(i)){var o=i;i=t,t=o}else r.isNode(t)||i?r.isNode(t)&&!i&&(i={}):(i=t,t=document);else t=document,i={};var s={namespace:n};i=r.extend(s,i),this._ctx=r.getElement(t),this._config=i,this._sandbox=new e(this),this._modules={},this._id=1}function e(t){this._application=t,this._eventEmitters=[]}function n(t,e){this._ctx=t,this._sandbox=e,this._events=new i(e)}function i(t){this._listeners={},this._sandbox=t,this._connected=!1}t.prototype.registerModules=function(t){var e={};t=r.getElement(t)||this._ctx,this._sandbox.dispatch("t.register.start");var n=r.getModuleNodes(t);return n.forEach(function(t){var n=this.registerModule(t,t.getAttribute("data-t-name"),t.getAttribute("data-t-decorator"),t.getAttribute("data-t-namespace"));n&&(e[n._ctx.getAttribute("data-t-id")]=n)}.bind(this)),this._sandbox.dispatch("t.register.end"),e},t.prototype.unregisterModules=function(t){t=t||this._modules,this._sandbox.dispatch("t.unregister.start");for(var e in t)this._modules.hasOwnProperty(e)&&(r.isNode(this._modules[e]._ctx)&&this._modules[e]._ctx.removeAttribute("data-t-id"),delete this._modules[e]);this._sandbox.dispatch("t.unregister.end")},t.prototype.start=function(t){t=t||this._modules;var e=[];this._sandbox.dispatch("t.start");for(var n in t)if(t.hasOwnProperty(n)){var i=function(e){return new Promise(function(n,i){t[e].start(n,i)})}(n);e.push(i)}var r=Promise.all(e);return r.then(function(){this._sandbox.dispatch("t.sync")}.bind(this))["catch"](function(t){throw t}),r},t.prototype.stop=function(t){t=t||this._modules,this._sandbox.dispatch("t.stop");for(var e in t)t.hasOwnProperty(e)&&t[e].stop()},t.prototype.registerModule=function(t,e,n,i){var o=this._modules;if(t.hasAttribute("data-t-id"))return null;if(e=r.capitalize(r.camelize(e)),r.isString(n)?window[n]?(i=window[n],n=null):n=n.split(","):!Array.isArray(n)&&r.isObject(n)&&(i=n,n=null),n=n||[],n=n.map(function(t){return r.capitalize(r.camelize(t.trim()))}),i=i||this._config.namespace,i[e]){var s=this._id++;t.setAttribute("data-t-id",s),o[s]=new i[e](t,this._sandbox);for(var a=0,c=n.length;a<c;a++){var u=n[a];i[e][u]&&i[e][u](o[s])}return o[s]}return this._sandbox.dispatch("t.missing",t,e,n,i),null},t.prototype.getModuleById=function(t){if(this._modules[t])return this._modules[t];throw Error("The module with the id "+t+" does not exist")},e.prototype.addModules=function(t){var e={},n=this._application;return r.isNode(t)&&(e=n.registerModules(t),n.start(e)),e},e.prototype.removeModules=function(t){var e=this._application;if(r.isNode(t)){var n={},i=r.getModuleNodes(t);i.forEach(function(t){if(t.hasAttribute("data-t-id")){var e=t.getAttribute("data-t-id"),i=this.getModuleById(e);i&&(n[e]=i)}}.bind(this)),t=n}return r.isObject(t)&&(e.stop(t),e.unregisterModules(t)),this},e.prototype.getModuleById=function(t){return this._application.getModuleById(t)},e.prototype.getConfig=function(){return this._application._config},e.prototype.getConfigParam=function(t){var e=this._application._config;if(void 0!==e[t])return e[t];throw Error("The config param "+t+" does not exist")},e.prototype.addEventEmitter=function(t){return this._eventEmitters.push(t),this},e.prototype.removeEventEmitter=function(t){for(var e=this._eventEmitters,n=0,i=e.length;n<i;n++)if(e[n]===t){e.splice(n,1);break}return this},e.prototype.dispatch=function(){for(var t=this._eventEmitters,e=0,n=t.length;e<n;e++){var i=t[e];void 0!==i&&i.handle.apply(i,arguments)}return this},n.prototype.start=function(t){t()},n.prototype.stop=function(){this._events.off().disconnect()},i.prototype.on=i.prototype.addListener=function(t,e){return this.connect(),(this._listeners["$"+t]=this._listeners["$"+t]||[]).push(e),this},i.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return this.connect(),n.listener=e,this.on(t,n),this},i.prototype.off=i.prototype.removeListener=i.prototype.removeAllListeners=function(t,e){if(0===arguments.length)return this._listeners={},this;var n=this._listeners["$"+t];if(!n)return this;if(1===arguments.length)return delete this._listeners["$"+t],this;for(var i,r=0,o=n.length;r<o;r++)if(i=n[r],i===e||i.listener===e){n.splice(r,1);break}return this},i.prototype.emit=function(){return this.connect(),this._sandbox.dispatch.apply(this._sandbox,arguments),this},i.prototype.handle=function(t){var e=[].slice.call(arguments,1),n=this._listeners["$"+t];if(n){n=n.slice(0);for(var i=0,r=n.length;i<r;++i)n[i].apply(this,e)}return this},i.prototype.listeners=function(t){return this._listeners["$"+t]||[]},i.prototype.hasListeners=function(t){return!!this.listeners(t).length},i.prototype.connect=function(){return this._connected||(this._sandbox.addEventEmitter(this),this._connected=!0),this},i.prototype.disconnect=function(){return this._connected&&(this._sandbox.removeEventEmitter(this),this._connected=!1),this};var r={capitalize:function(t){return t.substr(0,1).toUpperCase().concat(t.substr(1))},camelize:function(t){return t.replace(/(\-[A-Za-z])/g,function(t){return t.toUpperCase().replace("-","")})},isString:function(t){return"[object String]"===Object.prototype.toString.call(t)},isObject:function(t){var e=typeof t;return!(!t||"object"!==e&&"function"!==e||Array.isArray(t))},isFunction:function(t){var e=typeof t;return!!t&&"function"===e},isNode:function(t){return!(!t||!t.nodeType)&&(1===t.nodeType||9===t.nodeType)},matches:function(t,e){var n=Element.prototype,i=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||function(t){return[].slice.call(document.querySelectorAll(t)).indexOf(this)!==-1};return i.call(t,e)},extend:function(t){if(!r.isObject(t))return t;for(var e,n,i=1,o=arguments.length;i<o;i++){e=arguments[i];for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n])}return t},getElement:function(t){return this.isNode(t)?9===t.nodeType&&t.documentElement?t.documentElement:t:null},getModuleNodes:function(t){var e=[].slice.call(t.querySelectorAll("[data-t-name]"));return this.matches(t,"[data-t-name]")&&e.unshift(t),e},createModule:function(t){if(!t||!r.isObject(t))throw Error("Your module spec is not an object. Usage: T.createModule({ … })");var e=function(t,e){n.call(this,t,e)},i=e.prototype=Object.create(n.prototype);i.constructor=e,t.hasOwnProperty("statics")&&r.extend(e,t.statics),t.hasOwnProperty("stop")&&(i.stop=function(){t.stop.apply(this,arguments),n.prototype.stop.apply(this,arguments)});var o=["statics","stop"];for(var s in t)if(t.hasOwnProperty(s)&&o.indexOf(s)===-1){var a=t[s];i[s]=a}return e},createDecorator:function(t){if(!t||!r.isObject(t))throw Error("Your decorator spec is not an object. Usage: T.createDecorator({ … })");return function(e){var n,i={};for(n in e)r.isFunction(e[n])&&(i[n]=e[n].bind(e));for(n in t)t.hasOwnProperty(n)&&(r.isFunction(t[n])?e[n]=function(t,e){return function(){return this._parent=i,e.apply(this,arguments)}}(n,t[n]):e[n]=t[n])}}},o={Application:t,Sandbox:e,Module:n,EventEmitter:i,createModule:r.createModule,createDecorator:r.createDecorator,version:"3.0.0"};return o});
//# sourceMappingURL=terrific.min.js.map
